using System;
using System.Collections.Generic;
using System.Windows.Forms;

namespace CustomerInformationSystem
{
    public partial class Form1 : Form
    {
        private readonly CustomerRepository _customerRepository;
        private const string ConnectionString = "Data Source=DESKTOP-2BCT1O2;Initial Catalog=CustomerInformationSystem;Integrated Security=True;Persist Security Info=False;Pooling=False;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=True;Application Name=\"SQL Server Management Studio\";Command Timeout=30";

        public Form1()
        {
            InitializeComponent();
            _customerRepository = new CustomerRepository(ConnectionString);
            this.Load += Form1_Load;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            LoadCustomers();
        }

        private void LoadCustomers()
        {
            var customers = _customerRepository.GetAllCustomers();
            dataGridViewCustomers.DataSource = customers;
        }
    }
}
